<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timeline</title>
    <style>
        body { font-family: Arial, sans-serif; }
	.title-container { background-color: #141414; color: white; padding: 100px; font-size: 69px; font-weight: bold; text-align: center; width: 100%; }
        .timeline { display: flex; overflow-x: scroll; white-space: nowrap; padding: 20px; }
        .event { margin: 10px; padding: 10px; border: 1px solid #ccc; cursor: pointer; display: flex; flex-direction: column; align-items: center; min-width: 400px; max-width: 700px;}
        .event .date { font-weight: bold; margin-bottom: 5px; }
        .description { display: none; word-wrap: break-word; min-width:300px; max-width: 600px; white-space: normal; }
	.event .name { font-weight: bold; word-wrap: break-word; max-width: 100%; text-align: center; }
	.links { display: none; margin-top: 10px; }
	.event img { 
		width: auto;
		height: 200px;
		object-fit: cover;
		margin: 10px 0;
	}

    </style>
</head>
<body>
    <div class="title-container">A Feminist Timeline</div>
    <div class="timeline" id="timeline"></div>
    <script>
        fetch('http://localhost:3000/events')
		    .then(response => response.json()).then(events => {
					const timeline = document.getElementById('timeline');
					events.forEach(event => {
           				const div = document.createElement('div');
            				div.classList.add('event');
			

           let linksHTML = '';
                    [
                        { url: event.link1, desc: event.linkdesc1 },
                        { url: event.link2, desc: event.linkdesc2 },
                        { url: event.link3, desc: event.linkdesc3 }
                    ].forEach(link => {
                        if (link.url) {
                            linksHTML += `<p><a href="${link.url}" target="_blank">${link.desc || 'More info'}</a></p>`;
                        }
                    });

	    function formatDescription(text, maxLength) {
		const words = text.split(' ');
                        let formattedText = '';
			let line = '';

                        words.forEach(word => {
                            if ((line + word).length > maxLength) {
                                formattedText += line.trim() + '\n';
                                line = word + ' ';
                            } else {
                                line += word + ' ';
                            }
                        });
                        formattedText += line.trim();
                        return formattedText;
                    }

			div.innerHTML = `<img src="${event.image_url}" alt="${event.name}" class="event-image"> 
				<div class='name'>${event.name}</div>
	   			<div class='date'>${event.formatted_date}</div>
                        	<p class='description'>${formatDescription(event.description, 100)}</p>
	   			<div class='links'>${linksHTML}</div>`;                   
            div.addEventListener('click', () => {
                const desc = div.querySelector('.description');
                desc.style.display = desc.style.display === 'block' ? 'none' : 'block';
            });

            timeline.appendChild(div);
        });
    });

    </script>
</body>
</html>


